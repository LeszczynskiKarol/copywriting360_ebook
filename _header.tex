% ============================================================
% COPYWRITING 360° - Professional Header
% ============================================================

% ------------------------------------------------------------
% COLORS
% ------------------------------------------------------------
\usepackage{xcolor}

\definecolor{primaryblue}{HTML}{1a73e8}
\definecolor{primarydark}{HTML}{0d47a1}
\definecolor{primarylight}{HTML}{e3f2fd}
\definecolor{accentgreen}{HTML}{00c853}
\definecolor{accentred}{HTML}{d50000}
\definecolor{accentpurple}{HTML}{7c4dff}
\definecolor{accentorange}{HTML}{ff6d00}
\definecolor{textdark}{HTML}{212121}
\definecolor{textmuted}{HTML}{757575}
\definecolor{backgroundgray}{HTML}{f5f5f5}
\definecolor{bordergray}{HTML}{e0e0e0}
\definecolor{quotebg}{HTML}{fff8e1}
\definecolor{quoteborder}{HTML}{ffab00}
\definecolor{tipbg}{HTML}{e8f5e9}
\definecolor{tipborder}{HTML}{4caf50}
\definecolor{warningbg}{HTML}{fff3e0}
\definecolor{warningborder}{HTML}{ff9800}
\definecolor{importantbg}{HTML}{fce4ec}
\definecolor{importantborder}{HTML}{e91e63}
\definecolor{exercisebg}{HTML}{e3f2fd}
\definecolor{exerciseborder}{HTML}{1976d2}

% ------------------------------------------------------------
% PACKAGES
% ------------------------------------------------------------
\usepackage{tcolorbox}
\tcbuselibrary{skins,breakable}
\usepackage{fontawesome5}
\usepackage{booktabs}
\usepackage{tabularx}
\usepackage{float}
\usepackage{fancyhdr}
\usepackage{titlesec}
\usepackage{enumitem}
\usepackage{tikz}
\usepackage[normalem]{ulem}
\usetikzlibrary{positioning}

% ------------------------------------------------------------
% CHAPTER & SECTION STYLING
% ------------------------------------------------------------
\titleformat{\chapter}[display]
  {\normalfont\huge\bfseries\color{primarydark}}
  {\flushright\fontsize{72}{72}\selectfont\textcolor{primaryblue!30}{\thechapter}}
  {-20pt}
  {\Huge}

\titleformat{\section}
  {\normalfont\Large\bfseries\color{primarydark}}
  {\textcolor{primaryblue}{\thesection}}
  {1em}
  {}

\titleformat{\subsection}
  {\normalfont\large\bfseries\color{textdark}}
  {\textcolor{primaryblue}{\thesubsection}}
  {0.75em}
  {}

\titlespacing*{\chapter}{0pt}{30pt}{20pt}

% ------------------------------------------------------------
% HEADERS & FOOTERS
% ------------------------------------------------------------
\pagestyle{fancy}
\fancyhf{}
\fancyhead[LE,RO]{\small\color{textmuted}\leftmark}
\fancyfoot[LE,RO]{\bfseries\color{primaryblue}\thepage}
\fancyfoot[RE,LO]{\small\color{textmuted}Copywriting 360°}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0pt}

\fancypagestyle{plain}{
  \fancyhf{}
  \fancyfoot[C]{\bfseries\color{primaryblue}\thepage}
  \renewcommand{\headrulewidth}{0pt}
}

% ------------------------------------------------------------
% CUSTOM BOXES
% ------------------------------------------------------------

% Quote box
\newtcolorbox{cytat}{
  enhanced,
  breakable,
  colback=quotebg,
  colframe=quoteborder,
  boxrule=0pt,
  borderline west={4pt}{0pt}{quoteborder},
  sharp corners,
  left=15pt, right=15pt, top=12pt, bottom=12pt,
  fontupper=\itshape\large
}

% Tip box
\newtcolorbox{wskazowka}{
  enhanced,
  breakable,
  colback=tipbg,
  colframe=tipborder,
  boxrule=0pt,
  borderline west={4pt}{0pt}{tipborder},
  sharp corners,
  left=15pt, right=15pt, top=12pt, bottom=12pt,
  title={\color{tipborder}\faLightbulb[regular]\ \ WSKAZÓWKA},
  fonttitle=\bfseries,
  coltitle=tipborder,
  attach boxed title to top left={yshift=-2mm, xshift=5mm},
  boxed title style={colback=tipbg, boxrule=0pt}
}

% Warning box
\newtcolorbox{uwaga}{
  enhanced,
  breakable,
  colback=warningbg,
  colframe=warningborder,
  boxrule=0pt,
  borderline west={4pt}{0pt}{warningborder},
  sharp corners,
  left=15pt, right=15pt, top=12pt, bottom=12pt,
  title={\color{warningborder}\faExclamationTriangle\ \ UWAGA},
  fonttitle=\bfseries,
  coltitle=warningborder,
  attach boxed title to top left={yshift=-2mm, xshift=5mm},
  boxed title style={colback=warningbg, boxrule=0pt}
}

% Important box
\newtcolorbox{wazne}{
  enhanced,
  breakable,
  colback=importantbg,
  colframe=importantborder,
  boxrule=0pt,
  borderline west={4pt}{0pt}{importantborder},
  sharp corners,
  left=15pt, right=15pt, top=12pt, bottom=12pt,
  title={\color{importantborder}\faExclamationCircle\ \ WAŻNE},
  fonttitle=\bfseries,
  coltitle=importantborder,
  attach boxed title to top left={yshift=-2mm, xshift=5mm},
  boxed title style={colback=importantbg, boxrule=0pt}
}

% Exercise box
\newtcolorbox{cwiczenie}[1]{
  enhanced,
  breakable,
  colback=exercisebg,
  colframe=exerciseborder,
  boxrule=1pt,
  arc=5pt,
  left=15pt, right=15pt, top=12pt, bottom=12pt,
  title={\color{white}\faEdit\ \ ĆWICZENIE: #1},
  fonttitle=\bfseries,
  coltitle=white,
  attach boxed title to top left={yshift=-3mm, xshift=5mm},
  boxed title style={colback=exerciseborder, arc=3pt}
}

% Concept box
\newtcolorbox{pojecie}[1]{
  enhanced,
  breakable,
  colback=primarylight,
  colframe=primarydark,
  boxrule=2pt,
  arc=0pt,
  left=15pt, right=15pt, top=12pt, bottom=12pt,
  title={\color{white}\faKey\ \ #1},
  fonttitle=\bfseries,
  coltitle=white,
  attach boxed title to top left={yshift=-3mm, xshift=5mm},
  boxed title style={colback=primarydark, arc=2pt}
}

% Formula box
\newtcolorbox{formula}[1]{
  enhanced,
  colback=white,
  colframe=accentpurple,
  boxrule=2pt,
  arc=8pt,
  left=15pt, right=15pt, top=12pt, bottom=12pt,
  title={\color{white}\faMagic\ \ FORMUŁA: #1},
  fonttitle=\bfseries,
  coltitle=white,
  attach boxed title to top center={yshift=-3mm},
  boxed title style={colback=accentpurple, arc=5pt}
}

% Example box
\newtcolorbox{przyklad}[1]{
  enhanced,
  breakable,
  colback=backgroundgray,
  colframe=primaryblue,
  boxrule=1pt,
  arc=0pt,
  left=15pt, right=15pt, top=12pt, bottom=12pt,
  title={\color{white}\faFileAlt\ \ PRZYKŁAD: #1},
  fonttitle=\bfseries,
  coltitle=white,
  attach boxed title to top left={yshift=-3mm, xshift=5mm},
  boxed title style={colback=primaryblue, arc=2pt}
}

% ------------------------------------------------------------
% LIST STYLING
% ------------------------------------------------------------
\setlist[itemize,1]{label=\textcolor{primaryblue}{\faChevronRight}, leftmargin=*, itemsep=4pt}
\setlist[itemize,2]{label=\textcolor{primaryblue}{\faAngleRight}, leftmargin=*, itemsep=2pt}
\setlist[enumerate,1]{label=\textcolor{primaryblue}{\bfseries\arabic*.}, leftmargin=*, itemsep=4pt}

\newlist{checklist}{itemize}{1}
\setlist[checklist]{label=\textcolor{accentgreen}{\faCheckSquare}, leftmargin=*, itemsep=4pt}

% ------------------------------------------------------------
% SPECIAL COMMANDS
% ------------------------------------------------------------

% Chapter opener quote
\newcommand{\chapteropener}[1]{%
  \begin{center}
    \large\itshape\color{textmuted}#1
  \end{center}
  \vspace{1em}
}

% Decorative line
\newcommand{\decoline}{%
  \begin{center}
    \textcolor{bordergray}{\rule{0.25\textwidth}{0.5pt}}%
    \quad\textcolor{primaryblue}{\faFeather}\quad%
    \textcolor{bordergray}{\rule{0.25\textwidth}{0.5pt}}
  \end{center}
}

% Key takeaway
\newcommand{\takeaway}[1]{%
  \begin{tcolorbox}[
    enhanced,
    colback=accentgreen!10,
    colframe=accentgreen,
    boxrule=0pt,
    borderline south={3pt}{0pt}{accentgreen},
    sharp corners,
    left=15pt, right=15pt, top=10pt, bottom=10pt
  ]
    \textbf{\color{accentgreen}\faCheckCircle\ \ KLUCZOWY WNIOSEK:}\\[5pt]
    #1
  \end{tcolorbox}
}

% Stat highlight
\newcommand{\stathighlight}[2]{%
  \begin{center}
    \begin{tcolorbox}[
      enhanced,
      colback=primarylight,
      colframe=primaryblue,
      boxrule=1pt,
      arc=5pt,
      width=0.6\textwidth,
      halign=center
    ]
      {\fontsize{36}{40}\selectfont\bfseries\color{primarydark}#1}\\[5pt]
      {\color{textmuted}#2}
    \end{tcolorbox}
  \end{center}
}

% Before/After comparison
\newcommand{\beforeafter}[2]{%
  \begin{tcolorbox}[
    enhanced,
    sidebyside,
    sidebyside align=top,
    lefthand width=0.47\textwidth,
    colback=white,
    colframe=bordergray,
    boxrule=0.5pt,
    arc=5pt,
    left=10pt, right=10pt, top=10pt, bottom=10pt
  ]
    \textbf{\color{accentred}\faTimesCircle\ \ PRZED}\\[6pt]
    \small #1
    \tcblower
    \textbf{\color{accentgreen}\faCheckCircle\ \ PO}\\[6pt]
    \small #2
  \end{tcolorbox}
}

% ------------------------------------------------------------
% TABLE STYLING
% ------------------------------------------------------------
\renewcommand{\arraystretch}{1.3}